(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"225":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var o,r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=n(6),i=_interopRequireDefault(s),l=_interopRequireDefault(n(7)),p=n(95),c=n(96);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}n(256);var u=null,d=(0,c.connect)(function(e){var t=e.login;return a({},t)})(o=function(e){function Login(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Login);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Login.__proto__||Object.getPrototypeOf(Login)).call(this,e));return t.config={"navigationBarTitleText":"登录"},t.getMobile=function(e){var n=e.target.value;t.props.dispatch({"type":"login/save","payload":{"mobile":n}})},t.getCode=function(e){var n=e.target.value;t.props.dispatch({"type":"login/save","payload":{"code":n}})},t.login=function(){if(""==t.props.mobile||11!=t.props.mobile.length||""==t.props.code||4!=t.props.code.length)return t.showToast("请输入有效的手机号或输入有效验证码！"),!1;t.props.dispatch({"type":"login/login","payload":{"code":t.props.code,"mobile":t.props.mobile}})},t.sendSms=function(){if(""==t.props.mobile||11!=t.props.mobile.length)return t.showToast("请输入有效的手机号！"),!1;t.props.dispatch({"type":"login/sendSms","payload":{"mobile":t.props.mobile}}).then(function(){t.setIntervalTime(),t.props.erroMessage&&""!=t.props.erroMessage&&(clearInterval(u),t.showToast(t.props.erroMessage))})},t.setIntervalTime=function(){clearInterval(u);var e=30;u=setInterval(function(){e--,t.props.dispatch({"type":"login/save","payload":{"sending":1,"smsTime":e}}),(0==e||t.props.erroMessage&&""!=t.props.erroMessage)&&(clearInterval(u),t.props.dispatch({"type":"login/save","payload":{"sending":2,"erroMessage":"","smsTime":30}}))},1e3)},t.getVoiceCode=function(){if(""==t.props.mobile||11!=t.props.mobile.length)return t.showToast("请输入有效的手机号！"),!1;t.props.dispatch({"type":"login/sendSmsVoice","payload":{"mobile":t.props.mobile}}).then(function(){t.setIntervalTime(),t.props.erroMessage&&""!=t.props.erroMessage?(clearInterval(u),t.showToast(t.props.erroMessage)):t.showToast("电话拨打中...请留意相关电话")})},t.state={"mobile":"","code":"","invitation_code":"","access_token":"","nickname":"","new_user":"","is_has_buy_card":"","smsText":"发送验证码","sending":0,"smsTime":30,"erroMessage":""},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Login,s.Component),r(Login,[{"key":"showToast","value":function showToast(e){i.default.showToast({"title":e,"icon":"none"})}},{"key":"render","value":function render(){var e=this.props,t=e.sending,n=e.smsTime;return i.default.getEnv()===i.default.ENV_TYPE.WEAPP&&this.setState({"sending":t,"smsTime":n}),l.default.createElement(p.View,{"className":"login-page","id":"login-page"},l.default.createElement(p.View,{"className":"title"},"您好，请登录"),l.default.createElement(p.View,{"className":"title-des"},"新用户注册即享18天会员98元"),l.default.createElement(p.View,{"className":"bgtopWrap"},l.default.createElement(p.View,{"className":"loginWrap"},l.default.createElement(p.View,{"className":"inpuWrapMpblie"},l.default.createElement(p.Input,{"type":"number","name":"mobile","maxLength":"11","placeholder":"请输入手机号","value":this.props.mobile,"onInput":this.getMobile})),l.default.createElement(p.View,{"className":"inpuWrapNumber"},l.default.createElement(p.Input,{"type":"number","name":"code","maxLength":"4","placeholder":"请输入验证码","value":this.props.code,"onInput":this.getCode}),2==this.state.sending&&l.default.createElement(p.View,{"className":"numberWrap","onClick":this.sendSms},"重新获取"),1==this.state.sending&&l.default.createElement(p.View,{"className":"numberWrap"},n+"秒后重发"),0==this.state.sending&&l.default.createElement(p.View,{"className":"numberWrap","onClick":this.sendSms},"获取验证码")),l.default.createElement(p.Button,{"className":"button","onClick":this.login},"登录"),l.default.createElement(p.View,{"className":"see-des","onClick":this.getVoiceCode},"收不到短信？",l.default.createElement(p.Text,null,"使用语音验证码")))))}},{"key":"componentDidMount","value":function componentDidMount(){}},{"key":"componentDidShow","value":function componentDidShow(){}}]),Login}())||o;t.default=d},"256":function(e,t,n){}}]);